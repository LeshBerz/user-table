# User-Table

User-Table — это React-приложение, реализующее таблицу с информацией о пользователях. Приложение использует API [DummyJSON](https://dummyjson.com/docs/users) для получения данных и включает сортировку, фильтрацию, пагинацию, модальное окно, обработку ошибок, изменение ширины колонок, темную/светлую тему и мультиязычность (русский и английский).

## Требования задания

Приложение разработано в соответствии с требованиями:
- **Основные цели**:
  - Таблица с данными пользователей (ФИО, возраст, пол, телефон, email, страна, город).
  - Сортировка по полям ФИО, возраст, пол, телефон с тремя состояниями (по возрастанию, по убыванию, без сортировки).
  - Использование Fetch API для HTTP-запросов к DummyJSON.
  - Ширина таблицы — 100% от экрана, максимум 1400px.
- **Дополнительные цели**:
  - Фильтрация по полям (поиск, возраст, пол, страна, город).
  - Постраничное отображение (пагинация).
  - Модальное окно с подробной информацией о пользователе (ФИО, возраст, адрес, рост, вес, телефон, email, аватар).
  - Обработка ошибок HTTP-запросов (404, 500+, сетевые ошибки) с UI и повторными попытками.
  - Изменение ширины колонок с минимальной шириной 50px.
- **Технические требования**:
  - React 18+.
  - Размещение на GitHub и GitHub Pages.
  - Архитектура приложения с разделением на компоненты, сервисы и хранилища состояния.

## Стек технологий

- **Frontend**: React 18, JavaScript, HTML, CSS (CSS Modules)
- **Состояние**: MobX
- **Локализация**: i18next, react-i18next, i18next-browser-languagedetector
- **HTTP-запросы**: Fetch API
- **Сборка**: Vite
- **Линтеры и форматтеры**: ESLint, Prettier

## Функциональность

1. **Таблица пользователей**:
   - Отображает данные: ФИО, возраст, пол, телефон, email, страна, город.
   - Сортировка по полям ФИО, возраст, пол, телефон (по возрастанию, по убыванию, без сортировки).
   - Изменение ширины колонок с помощью drag-and-drop (минимальная ширина 50px).
   - Максимальная ширина таблицы — 1400px, адаптивная под размер экрана.

2. **Фильтрация**:
   - Поддерживает фильтры по поиску (поиск по всем полям), возрасту, полу, стране и городу.
   - Фильтры применяются через форму с немедленным обновлением данных.

3. **Пагинация**:
   - Постраничное отображение пользователей (по 10 записей на страницу).
   - Навигация: кнопки "Предыдущая" и "Следующая", отображение текущей страницы и общего количества.

4. **Модальное окно**:
   - Открывается при клике на строку таблицы.
   - Показывает подробную информацию: ФИО, возраст, пол, телефон, email, адрес (страна, город, улица, почтовый индекс), рост, вес, аватар.
   - Закрывается по клику на крестик, оверлей или клавишу Escape.

5. **Обработка ошибок**:
   - Отображение ошибок HTTP-запросов (404, 500+, сетевые ошибки) в пользовательском интерфейсе.
   - Возможность повторных попыток (до 3 раз) с задержкой 1 секунда.
   - Информативные сообщения об ошибках.

6. **Темная/светлая тема**:
   - Переключение между темной и светлой темой через кнопку.
   - Сохранение выбранной темы в `localStorage`.

7. **Мультиязычность**:
   - Поддержка русского и английского языков.
   - Переключение языка через кнопки RU/EN.
   - Сохранение выбранного языка в `localStorage`.
   - Перевод всех текстов интерфейса (заголовки, фильтры, модальное окно, ошибки, пагинация, переключатель темы).

## Архитектура проекта

Проект организован с использованием модульной архитектуры:

```
user-table/
├── .eslintrc.json              # Конфигурация ESLint
├── .gitignore                  # Игнорируемые файлы для Git
├── .prettierrc                 # Конфигурация Prettier
├── eslint.config.js            # Дополнительная конфигурация ESLint
├── index.html                  # Главная HTML-страница
├── package-lock.json           # Зависимости (закрепленные версии)
├── package.json                # Зависимости и скрипты проекта
├── README.md                   # Документация проекта
├── src/
│   ├── App.jsx                 # Корневой компонент
│   ├── assets/                 # Папка для статических ресурсов (пустая)
│   ├── components/
│   │   ├── ErrorMessage/
│   │   │   ├── ErrorMessage.jsx         # Компонент отображения ошибок
│   │   │   ├── ErrorMessage.module.css  # Стили для ErrorMessage
│   │   ├── Filters/
│   │   │   ├── Filters.jsx              # Компонент фильтров
│   │   │   ├── Filters.module.css       # Стили для Filters
│   │   ├── LanguageToggle/
│   │   │   ├── LanguageToggle.jsx       # Компонент переключения языка
│   │   │   ├── LanguageToggle.module.css # Стили для LanguageToggle
│   │   ├── Modal/
│   │   │   ├── Modal.jsx                # Модальное окно
│   │   │   ├── Modal.module.css         # Стили для Modal
│   │   ├── Pagination/
│   │   │   ├── Pagination.jsx           # Компонент пагинации
│   │   │   ├── Pagination.module.css    # Стили для Pagination
│   │   ├── Table/
│   │   │   ├── Table.jsx                # Компонент таблицы
│   │   │   ├── Table.module.css         # Стили для Table
│   │   ├── ThemeToggle/
│   │   │   ├── ThemeToggle.jsx          # Компонент переключения темы
│   │   │   ├── ThemeToggle.module.css   # Стили для ThemeToggle
│   ├── i18n/
│   │   ├── index.js                    # Конфигурация i18next
│   ├── main.jsx                        # Точка входа приложения
│   ├── pages/
│   │   ├── UsersPage.jsx               # Главная страница
│   ├── services/
│   │   ├── api.js                      # Логика HTTP-запросов
│   ├── stores/
│   │   ├── ui.js                       # Хранилище для UI (тема)
│   │   ├── users.js                    # Хранилище для данных пользователей
│   ├── styles/
│   │   ├── global.css                  # Глобальные стили и темы
├── vite.config.js                      # Конфигурация Vite
```

### Основные компоненты

- **App.jsx**: Корневой компонент, рендерит `UsersPage`.
- **UsersPage.jsx**: Главная страница, объединяет компоненты `ThemeToggle`, `LanguageToggle`, `Filters`, `ErrorMessage`, `Table`, `Pagination`, `Modal`.
- **Table.jsx**: Таблица с данными пользователей, поддерживает сортировку и изменение ширины колонок.
- **Filters.jsx**: Форма для фильтрации данных.
- **Modal.jsx**: Модальное окно с подробной информацией о пользователе.
- **ErrorMessage.jsx**: Компонент для отображения ошибок HTTP-запросов.
- **Pagination.jsx**: Компонент для постраничной навигации.
- **ThemeToggle.jsx**: Кнопка переключения темной/светлой темы.
- **LanguageToggle.jsx**: Кнопка переключения языка (RU/EN).
- **api.js**: Сервис для выполнения HTTP-запросов через Fetch API.
- **users.js**: MobX-хранилище для управления данными пользователей, сортировкой, фильтрацией, пагинацией, шириной колонок и ошибками.
- **ui.js**: MobX-хранилище для управления темой.
- **i18n/index.js**: Конфигурация локализации с переводами для русского и английского языков.

## Установка и запуск

### Требования

- Node.js (версия 18 или выше)
- npm (версия 8 или выше)

### Установка

1. Клонируйте репозиторий:
   ```bash
   git clone git@github.com:LeshBerz/user-table.git
   cd usertable
   ```
2. Установите зависимости:
   ```bash
   npm install
   ```

### Локальный запуск

```bash
npm run dev
```

Откройте `http://localhost:5173` в браузере (порт может отличаться, см. вывод команды).

### Сборка для продакшена

```bash
npm run build
```

Файлы сборки будут в папке `dist`.

### Развертывание на GitHub Pages
Демо доступно по адресу: `https://LeshBerz.github.io/user-table/`.

## Ссылки

- **Репозиторий**: https://github.com/LeshBerz/user-table
- **Демо**: https://LeshBerz.github.io/user-table/

## Использование

1. **Просмотр данных**:
   - Таблица загружает данные с API DummyJSON (10 пользователей на страницу).
   - Кликните на строку, чтобы открыть модальное окно с подробной информацией.
2. **Сортировка**:
   - Кликните на заголовки колонок (`ФИО`, `Возраст`, `Пол`, `Телефон`) для сортировки:
     - Первый клик: по возрастанию (↑).
     - Второй клик: по убыванию (↓).
     - Третий клик: без сортировки.
3. **Фильтрация**:
   - Введите значения в поля формы фильтров и нажмите "Применить".
4. **Пагинация**:
   - Используйте кнопки "Предыдущая" и "Следующая" для навигации.
5. **Изменение ширины колонок**:
   - Перетаскивайте полоски (справа от заголовков) для изменения ширины (мин. 50px).
6. **Тема**:
   - Нажмите "Темная тема" / "Светлая тема" для переключения.
7. **Язык**:
   - Нажмите кнопки RU/EN для переключения языка интерфейса.
8. **Ошибки**:
   - При ошибке загрузки данных отображается сообщение с кнопкой "Повторить" (до 3 попыток).

## Тестирование

- Проверьте сортировку, фильтрацию, пагинацию, модальное окно, изменение ширины колонок, переключение темы и языка.
- Для симуляции ошибок измените URL в `api.js` на неверный (например, `https://dummyjson.com/invalid`).

## Дополнительные замечания

- Все стили используют CSS Modules для изоляции и переменные CSS для поддержки тем.
- Состояние приложения (ширина колонок, тема, язык) сохраняется в `localStorage`.
- Логи добавлены для отладки (сортировка, модальное окно, переключение темы/языка).